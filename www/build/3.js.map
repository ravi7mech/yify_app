{"version":3,"sources":["../../src/pages/sub-title-search-subs-scene/sub-title-search-subs-scene.module.ts","../../src/pages/sub-title-search-subs-scene/sub-title-search-subs-scene.ts"],"names":[],"mappings":"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","file":"3.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SubTitleSearchSubsScenePage } from './sub-title-search-subs-scene';\n\n@NgModule({\n  declarations: [\n    SubTitleSearchSubsScenePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SubTitleSearchSubsScenePage),\n  ],\n})\nexport class SubTitleSearchSubsScenePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/sub-title-search-subs-scene/sub-title-search-subs-scene.module.ts","\n\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ToastController,AlertController } from 'ionic-angular';\nimport { Response, SubsceneResults,SubsceneSubtitlesLinks} from '../../models/moviesjson';\nimport { YifyMoviesProvider } from '../../providers/yify-movies/yify-movies';\nimport { FileTransfer, FileTransferObject } from '@ionic-native/file-transfer';\nimport { File } from '@ionic-native/file';\nimport { Clipboard } from '@ionic-native/clipboard';\nimport { SocialSharing } from '@ionic-native/social-sharing';\nimport { Storage } from \"@ionic/storage\";\nimport { Diagnostic } from '@ionic-native/diagnostic';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-sub-title-search-subs-scene',\n  templateUrl: 'sub-title-search-subs-scene.html',\n  providers: [YifyMoviesProvider, FileTransfer, File, Clipboard,Diagnostic],\n  styles: [\n    `ion-badge {\n      padding: 8px 11px;\n      text-align: center;\n      display: inline-block;\n      min-width: 10px;\n      font-size: 1.3rem;\n      font-weight: bold;\n      line-height: 1;\n      white-space: nowrap;\n      vertical-align: baseline;\n  }`\n  ]\n\n})\nexport class SubTitleSearchSubsScenePage {\n  suburl: string;\n  asynccall: boolean;\n  msg: boolean;\n  fileTransfer: FileTransferObject;\n  subtitelist:SubsceneResults;\n  sublist:Array<SubsceneSubtitlesLinks> = [];\n  url:string;\n  filename:string;\n  showheader:boolean = false;\n  params:any = {showheader:false};\n\n  constructor(public navCtrl: NavController, public navParams: NavParams,\n    private yifyProvider: YifyMoviesProvider, private transfer: FileTransfer, private file: File\n    , public toastCtrl: ToastController, private clipboard: Clipboard, private socialSharing: SocialSharing,\n    private localstorage: Storage,\n    public alert :AlertController,private diagnostic: Diagnostic) {\n    this.fileTransfer = this.transfer.create();\n    this.params = navParams.get('params');\n    if(this.params != null && this.params != undefined)\n    this.showheader = this.params.showheader;\n    this.localstorage.get('suburl').then((value) => {\n       this.suburl = value;\n        this.loadSubtitle();\n       \n    });\n   \n  }\n\n  loadSubtitle() {\n    try {\n      this.asynccall = true;\n       this.yifyProvider.getSubSceneSubTitles(this.suburl).subscribe(res => {\n       this.subtitelist = res;\n       if(this.subtitelist.langs_names.length > 0){\n        var j = 0;\n        for (let i = 0; i < this.subtitelist.langs_names.length; i++) {\n          if(i%2 === 0){\n            this.subtitelist.down_links[j].lang = this.subtitelist.langs_names[i].lang_name;\n          }else{\n            this.subtitelist.down_links[j].name = this.subtitelist.langs_names[i].lang_name;\n            j++;\n          }\n        }\n        this.asynccall = false;\n        this.sublist = this.subtitelist.down_links;\n\n\n       }else{\n        this.asynccall = false;\n        this.msg = true;\n       }      \n\n      }) \n      \n    } catch (e) {\n      console.log(e);\n      this.asynccall = false;\n      this.msg = true;\n    }\n  }\n\n  handleSubDownload(index:number){\n    this.sublist[index].downstart = true;\n      this.yifyProvider.downloadSubsceneSubs(this.url).subscribe(res => {\n        this.fileTransfer.download('https://subscene.com' + res.downlink[0].link, this.file.externalRootDirectory+'YIFY_Torrent_Browser/' + this.filename).then((entry) => {\n          this.sublist[index].downstart = false;\n          this.sublist[index].downcomplete = true;\n          this.presentToast(\"File saved in : \"+this.file.externalRootDirectory.replace('file:///','')+\"YIFY_Torrent_Browser/\"+this.filename);\n        }, (error) => {\n         this.showOpenSettingsAlert()\n        })\n\n       })  \n    \n  }\n\n  showOpenSettingsAlert(){\n    let alert = this.alert.create({\n      title: 'Permission needed!',\n      message: 'This permission is needed to save the downloaded subtitle to disk!',\n      buttons: [\n        {\n          text: 'OPEN SETTINGS',\n          handler: () => {\n            this.diagnostic.switchToSettings();\n          }\n        }\n      ]\n    });\n    alert.present();\n  }\n\n  downloadfile(file: SubsceneSubtitlesLinks,index:number) {\n    this.url = 'https://subscene.com'+file.link;\n    this.filename = file.name+'.zip';   \n    this.diagnostic.isExternalStorageAuthorized().then(res =>{\n      if(res) this.handleSubDownload(index)\n      else this.requestExternalStorageAuthorization(index)\n    })\n  }\n\n  requestExternalStorageAuthorization(index:number){\n    this.diagnostic.requestExternalStorageAuthorization().then(res =>{\n      console.log(\"requestExternalStorageAuthorization \",res)\n      if(res) this.handleSubDownload(index)\n      else this.showOpenSettingsAlert()\n    },err => {\n      this.showOpenSettingsAlert()\n    })\n  }\n\n \n  presentToast(msg: string) {\n    const toast = this.toastCtrl.create({\n      message: msg,\n      position: 'bottom',\n      closeButtonText: 'OK',\n      showCloseButton: true\n    })\n\n    toast.onDidDismiss(() => {\n      // this.showBanner()\n    })\n\n    toast.present()\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/sub-title-search-subs-scene/sub-title-search-subs-scene.ts"],"sourceRoot":""}